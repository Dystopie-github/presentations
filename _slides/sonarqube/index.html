---
title: sonarqube
description: using sonarqube with jenkins pipeline for code analysis and for basic security analysis
theme: black
date: 2017-09-02
reveal_config:
  controls: true
  progress: true
  transition: slide
  slideNumber: true
---
<section data-markdown>
    # sonarqube
    #### Jenkins pipeline
    #### security code analysis
</section>
<section>
  <section>
    <h1> À propos de moi</h1>
  </section>
  <section data-markdown data-background="/presentations/images/cagoule.JPG">
    ## Marc-André Lagacé

    7 ans d'expérience en TI

    - Spécialiste en déploiment et intégration continue
    - Ninja hacker; eye slit supporter!
  </section>
</section>
<section data-markdown>
### Jenkins pipeline code
```groovy
node {
   stage('SCM') { git 'https://github.com/foo/bar.git' }
   stage('SonarQube analysis') {
      withSonarQubeEnv('My SonarQube Server') {
         sh 'mvn clean package sonar:sonar'
       } // SonarQube taskId is automatically attached to the pipeline context
   }
}
// No need to occupy a node
stage("Quality Gate"){
   timeout(time: 1, unit: 'HOURS') { // Just in case something goes wrong, pipeline will be killed after a timeout
      def qg = waitForQualityGate() // Reuse taskId previously collected by withSonarQubeEnv
      if (qg.status != 'OK') {
      error "Pipeline aborted due to quality gate failure: ${qg.status}"
    }
  }
}
```
</section>
